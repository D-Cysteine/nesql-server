<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<th:block th:fragment="searchField(name, label, type)">
    <label th:for="${name}" class="form-label">[[${label}]]</label>
    <input th:id="${name}" th:name="${name}" th:type="${type}" class="form-control"
           th:value="${#request.getParameter(name)}">
</th:block>

<div th:fragment="paginatedTable(page, baseUri)" class="container">
    <div th:replace="~{fragment/search::paginationControls(${page}, ${baseUri})}"></div>
    <div class="row">
        <table class="table table-striped border">
            <tr th:each="row : ${page.content}">
                <td>
                    <a th:replace="~{fragment/icon::linkOverlayIconRow(${row})}"></a>
                </td>
            </tr>
            <tr th:if="${#lists.isEmpty(page.content)}">
                <td>
                    No rows in table
                </td>
            </tr>
        </table>
    </div>
    <div th:replace="~{fragment/search::paginationControls(${page}, ${baseUri})}"></div>
</div>

<div th:fragment="paginationControls(page, baseUri)"
     th:with="pageNumber=${page.number} + 1"
     class="row align-items-baseline">
    <div class="col">
        Page
        <th:block th:replace="~{fragment/format::formatInteger(${pageNumber})}"></th:block>
        of
        <th:block th:replace="~{fragment/format::formatInteger(${page.totalPages})}"></th:block>
        |
        <th:block th:replace="~{fragment/format::formatInteger(${page.totalElements})}"></th:block>
        total results
    </div>
    <div class="col-auto">
        <form method="get">
            <input type="hidden" th:name="${name}" th:value="${request.getParameter(name)}"
                   th:each="name : ${request.getParameterNames()}"
                   th:if="${name} != 'page'">

            <div class="input-group">
                <span class="input-group-text">Page</span>
                <input name="page" type="number" class="form-control text-end"
                       th:value="${pageNumber}">
                <span class="input-group-text">
                    /
                    <th:block th:replace="~{fragment/format::formatInteger(${page.totalPages})}">
                    </th:block>
                </span>
                <button type="submit" class="btn btn-primary">
                    <i class="bi-arrow-up-right"></i>
                </button>
            </div>
        </form>
    </div>
    <div class="col-auto">
        <nav aria-label="Table pagination controls">
            <ul class="pagination">
                <li class="page-item"
                    th:classappend="!${page.hasPrevious}? 'disabled'"
                    th:tabindex="!${page.hasPrevious}? '-1'">
                    <a class="page-link" aria-label="Previous"
                       th:href="@{${baseUri}(page=${pageNumber} - 1)}">
                        <i class="bi-arrow-left"></i>
                    </a>
                </li>
                <li class="page-item disabled" tab-index="-1">
                    <a class="page-link" href="#">
                        <span th:replace="~{fragment/format::formatInteger(${pageNumber})}"></span>
                    </a>
                </li>
                <li class="page-item"
                    th:classappend="!${page.hasNext}? 'disabled'"
                    th:tabindex="!${page.hasNext}? '-1'">
                    <a class="page-link" href="#" aria-label="Next"
                       th:href="@{${baseUri}(page=${pageNumber} + 1)}">
                        <i class="bi-arrow-right"></i>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>
</body>
</html>
